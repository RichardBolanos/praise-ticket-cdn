"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1079],{1079:(v,T,o)=>{o.r(T),o.d(T,{Tab3PageModule:()=>F});var r=o(4742),u=o(177),g=o(4341),k=o(5352),m=o(9860),d=o(467),e=o(3953),f=o(12);function b(i,s){if(1&i){const a=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.nI1(10,"date"),e.k0s()(),e.j41(11,"ion-button",7),e.bIt("click",function(){const n=e.eBV(a).$implicit,c=e.XpG();return e.Njj(c.deleteTicket(n.id))}),e.nrm(12,"ion-icon",8),e.k0s()()}if(2&i){const a=s.$implicit;e.R7$(3),e.JRh(a.name),e.R7$(2),e.SpI("Congregaci\xf3n: ",a.congregation,""),e.R7$(2),e.SpI("Tel\xe9fono: ",a.phone,""),e.R7$(2),e.SpI("Creado el: ",e.i5U(10,4,a.createdAt,"medium"),"")}}const P=[{path:"",component:(()=>{var i;class s{constructor(t,n){this.ticketService=t,this.alertController=n,this.tickets=[],this.filteredTickets=[],this.searchTerm="",this.currentPage=1,this.itemsPerPage=5,this.totalTickets=0}ngOnInit(){this.loadTickets()}loadTickets(){var t=this;return(0,d.A)(function*(){let n=yield t.ticketService.getTickets(t.currentPage,t.itemsPerPage);t.tickets=Array.isArray(n.result.data)?n.result.data:[n.result.data],t.totalTickets=Array.isArray(n.result.data)?n.result.data.length:1,t.filterTickets()})()}filterTickets(){this.filteredTickets=this.tickets.filter(t=>t.name.toLowerCase().includes(this.searchTerm.toLowerCase())||t.congregation.toLowerCase().includes(this.searchTerm.toLowerCase())||t.phone.includes(this.searchTerm))}get paginatedTickets(){const t=(this.currentPage-1)*this.itemsPerPage;return this.filteredTickets.slice(t,t+this.itemsPerPage)}changePage(t){this.currentPage=t,this.loadTickets()}deleteTicket(t){var n=this;return(0,d.A)(function*(){var l;yield(yield n.alertController.create({header:"Confirmar Eliminaci\xf3n",message:"\xbfEst\xe1s seguro de que deseas eliminar este ticket?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Eliminar",handler:(l=(0,d.A)(function*(){try{yield n.ticketService.deleteTicket(t),n.tickets=n.tickets.filter(C=>C.id!==t),n.filterTickets()}catch(h){console.error("Error eliminando el ticket:",h)}}),function(){return l.apply(this,arguments)})}]})).present()})()}}return(i=s).\u0275fac=function(t){return new(t||i)(e.rXU(f.Y),e.rXU(r.hG))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-tab3"]],decls:21,vars:4,consts:[["slot","end"],[3,"click"],["name","refresh"],[3,"ngModelChange","ionInput","ngModel"],[4,"ngFor","ngForOf"],["slot","start"],[3,"click","disabled"],["fill","clear","color","danger",3,"click"],["slot","icon-only","name","trash-outline"]],template:function(t,n){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Lista de Tickets"),e.k0s(),e.j41(4,"ion-buttons",0)(5,"ion-button",1),e.bIt("click",function(){return n.loadTickets()}),e.nrm(6,"ion-icon",2),e.k0s()()()(),e.j41(7,"ion-content")(8,"ion-list")(9,"ion-searchbar",3),e.mxI("ngModelChange",function(l){return e.DH7(n.searchTerm,l)||(n.searchTerm=l),l}),e.bIt("ionInput",function(){return n.filterTickets()}),e.k0s(),e.DNE(10,b,13,7,"ion-item",4),e.k0s(),e.j41(11,"ion-footer")(12,"ion-toolbar")(13,"ion-buttons",5)(14,"ion-button",6),e.bIt("click",function(){return n.changePage(n.currentPage-1)}),e.EFF(15," Anterior "),e.k0s()(),e.j41(16,"ion-title"),e.EFF(17),e.k0s(),e.j41(18,"ion-buttons",0)(19,"ion-button",1),e.bIt("click",function(){return n.changePage(n.currentPage+1)}),e.EFF(20,"Siguiente"),e.k0s()()()()()),2&t&&(e.R7$(9),e.R50("ngModel",n.searchTerm),e.R7$(),e.Y8G("ngForOf",n.paginatedTickets),e.R7$(4),e.Y8G("disabled",1===n.currentPage),e.R7$(3),e.SpI("P\xe1gina ",n.currentPage,""))},dependencies:[r.Jm,r.QW,r.W9,r.M0,r.eU,r.iq,r.uz,r.he,r.nf,r.S1,r.BC,r.ai,r.Gw,u.Sq,g.BC,g.vS,u.vh]}),s})()}];let p=(()=>{var i;class s{}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[m.iI.forChild(P),m.iI]}),s})(),F=(()=>{var i;class s{}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[r.bv,u.MD,g.YN,k.S,p]}),s})()}}]);